<!DOCTYPE html>
<html>

<head>
  <title>Event streams | C++React</title>
  <link rel="icon" type="image/png" href="../media/favicon.png">
  <link rel="stylesheet" href="../styles/design.css">
  <link rel="stylesheet" href="../styles/syntax.css">
  <script src="../scripts/jquery-1.11.1.min.js"></script>
  <script src="../scripts/jquery.fastLiveFilter.js"></script>
</head>

<body>
<div id="nav_panel_container">
  <div id="nav_panel_header">
    <input id="api_search" class="search_input" placeholder="Type to filter">
  </div>
  <div id="nav_panel_body">
    <ul id="api_list">
      <li class="api_group"><a class="group_link" href="../reference/Algorithm.h.html">Algorithm.h</a></li>
      <!-- <li class="api_subgroup">Functions</li> -->
      <li><a class="ref_link" href="../reference/Algorithm.h/Hold.html"><img class="entity_icon" src="../media/icon_func.png" /> Hold</a></li>
      <li><a class="ref_link" href="../reference/Algorithm.h/Monitor.html"><img class="entity_icon" src="../media/icon_func.png" /> Monitor</a></li>
      <li><a class="ref_link" href="../reference/Algorithm.h/Iterate.html"><img class="entity_icon" src="../media/icon_func.png" /> Iterate</a></li>
      <li><a class="ref_link" href="../reference/Algorithm.h/Snapshot.html"><img class="entity_icon" src="../media/icon_func.png" /> Snapshot</a></li>
      <li><a class="ref_link" href="../reference/Algorithm.h/Pulse.html"><img class="entity_icon" src="../media/icon_func.png" /> Pulse</a></li>
      <li><a class="ref_link" href="../reference/Algorithm.h/Changed.html"><img class="entity_icon" src="../media/icon_func.png" /> Changed</a></li>
      <li><a class="ref_link" href="../reference/Algorithm.h/ChangedTo.html"><img class="entity_icon" src="../media/icon_func.png" /> ChangedTo</a></li>

      <li class="api_group"><a class="group_link" href="../reference/Domain.h.html">Domain.h</a></li>
      <!-- <li class="api_subgroup">Constants</li> -->
      <li><a class="ref_link" href="../reference/Domain.h/WeightHint.html"><img class="entity_icon" src="../media/icon_enum.png" /> WeightHint</a></li>
      <!-- <li class="api_subgroup">Classes</li> -->
      <li><a class="ref_link" href="../reference/Domain.h/Continuation.html"><img class="entity_icon" src="../media/icon_class.png" /> Continuation</a></li>
      <li><a class="ref_link" href="../reference/Domain.h/TransactionStatus.html"><img class="entity_icon" src="../media/icon_class.png" /> TransactionStatus</a></li>
      <!-- <li class="api_subgroup">Functions</li> -->
      <li><a class="ref_link" href="../reference/Domain.h/DoTransaction.html"><img class="entity_icon" src="../media/icon_func.png" /> DoTransaction</a></li>
      <li><a class="ref_link" href="../reference/Domain.h/AsyncTransaction.html"><img class="entity_icon" src="../media/icon_func.png" /> AsyncTransaction</a></li>
      <li><a class="ref_link" href="../reference/Domain.h/MakeContinuation.html"><img class="entity_icon" src="../media/icon_func.png" /> MakeContinuation</a></li>
      <!-- <li class="api_subgroup">Macros</li> -->
      <li><a class="ref_link" href="../reference/Domain.h/REACTIVE_DOMAIN.html"><img class="entity_icon" src="../media/icon_macro.png" /> REACTIVE_DOMAIN</a></li>
      <li><a class="ref_link" href="../reference/Domain.h/USING_REACTIVE_DOMAIN.html"><img class="entity_icon" src="../media/icon_macro.png" /> USING_REACTIVE_DOMAIN</a></li>

      <li class="api_group"><a class="group_link" href="../reference/Event.h.html">Event.h</a></li>
      <!-- <li class="api_subgroup">Constants</li> -->
      <li><a class="ref_link" href="../reference/Event.h/Token.html"><img class="entity_icon" src="../media/icon_enum.png" /> Token</a></li>
      <!-- <li class="api_subgroup">Classes</li> -->
      <li><a class="ref_link" href="../reference/Event.h/Events.html"><img class="entity_icon" src="../media/icon_class.png" /> Events</a></li>
      <li><a class="ref_link" href="../reference/Event.h/EventSource.html"><img class="entity_icon" src="../media/icon_class.png" /> EventSource</a></li>
      <li><a class="ref_link" href="../reference/Event.h/TempEvents.html"><img class="entity_icon" src="../media/icon_class.png" /> TempEvents</a></li>
      <li><a class="ref_link" href="../reference/Event.h/EventRange.html"><img class="entity_icon" src="../media/icon_class.png" /> EventRange</a></li>
      <!-- <li class="api_subgroup">Functions</li> -->
      <li><a class="ref_link" href="../reference/Event.h/MakeEventSource.html"><img class="entity_icon" src="../media/icon_func.png" /> MakeEventSource</a></li>
      <li><a class="ref_link" href="../reference/Event.h/Merge.html"><img class="entity_icon" src="../media/icon_func.png" /> Merge</a></li>
      <li><a class="ref_link" href="../reference/Event.h/Filter.html"><img class="entity_icon" src="../media/icon_func.png" /> Filter</a></li>
      <li><a class="ref_link" href="../reference/Event.h/Transform.html"><img class="entity_icon" src="../media/icon_func.png" /> Transform</a></li>
      <li><a class="ref_link" href="../reference/Event.h/Process.html"><img class="entity_icon" src="../media/icon_func.png" /> Process</a></li>
      <li><a class="ref_link" href="../reference/Event.h/Join.html"><img class="entity_icon" src="../media/icon_func.png" /> Join</a></li>
      <li><a class="ref_link" href="../reference/Event.h/Flatten.html"><img class="entity_icon" src="../media/icon_func.png" /> Flatten</a></li>
      <li><a class="ref_link" href="../reference/Event.h/Tokenize.html"><img class="entity_icon" src="../media/icon_func.png" /> Tokenize</a></li>

      <li class="api_group"><a class="group_link" href="../reference/Observer.h.html">Observer.h</a></li>
      <!-- <li class="api_subgroup">Constants</li> -->
      <li><a class="ref_link" href="../reference/Observer.h/ObserverAction.html"><img class="entity_icon" src="../media/icon_enum.png" /> ObserverAction</a></li>
      <!-- <li class="api_subgroup">Classes</li> -->
      <li><a class="ref_link" href="../reference/Observer.h/Observer.html"><img class="entity_icon" src="../media/icon_class.png" /> Observer</a></li>
      <li><a class="ref_link" href="../reference/Observer.h/ScopedObserver.html"><img class="entity_icon" src="../media/icon_class.png" /> ScopedObserver</a></li>
      <!-- <li class="api_subgroup">Functions</li> -->
      <li><a class="ref_link" href="../reference/Observer.h/Observe.html"><img class="entity_icon" src="../media/icon_func.png" /> Observe</a></li>

      <li class="api_group"><a class="group_link" href="../reference/Reactor.h.html">Reactor.h</a></li>
      <!-- <li class="api_subgroup">Classes</li> -->
      <li><a class="ref_link" href="../reference/Reactor.h/Reactor.html"><img class="entity_icon" src="../media/icon_class.png" /> Reactor</a></li>
      <!-- <li class="api_subgroup">Functions</li> -->
      <li><a class="ref_link" href="../reference/Reactor.h/MakeReactor.html"><img class="entity_icon" src="../media/icon_func.png" /> MakeReactor</a></li>

      <li class="api_group"><a class="group_link" href="../reference/Signal.h.html">Signal.h</a></li>
      <!-- <li class="api_subgroup">Classes</li> -->
      <li><a class="ref_link" href="../reference/Signal.h/Signal.html"><img class="entity_icon" src="../media/icon_class.png" /> Signal</a></li>
      <li><a class="ref_link" href="../reference/Signal.h/VarSignal.html"><img class="entity_icon" src="../media/icon_class.png" /> VarSignal</a></li>
      <li><a class="ref_link" href="../reference/Signal.h/TempSignal.html"><img class="entity_icon" src="../media/icon_class.png" /> TempSignal</a></li>
      <li><a class="ref_link" href="../reference/Signal.h/SignalPack.html"><img class="entity_icon" src="../media/icon_class.png" /> SignalPack</a></li>
      <!-- <li class="api_subgroup">Functions</li> -->
      <li><a class="ref_link" href="../reference/Signal.h/MakeVar.html"><img class="entity_icon" src="../media/icon_func.png" /> MakeVar</a></li>
      <li><a class="ref_link" href="../reference/Signal.h/MakeSignal.html"><img class="entity_icon" src="../media/icon_func.png" /> MakeSignal</a></li>
      <li><a class="ref_link" href="../reference/Signal.h/Flatten.html"><img class="entity_icon" src="../media/icon_func.png" /> Flatten</a></li>
      <li><a class="ref_link" href="../reference/Signal.h/With.html"><img class="entity_icon" src="../media/icon_func.png" /> With</a></li>
      <!-- <li class="api_subgroup">Macros</li> -->
      <li><a class="ref_link" href="../reference/Signal.h/REACTIVE_PTR.html"><img class="entity_icon" src="../media/icon_macro.png" /> REACTIVE_PTR</a></li>
      <li><a class="ref_link" href="../reference/Signal.h/REACTIVE_REF.html"><img class="entity_icon" src="../media/icon_macro.png" /> REACTIVE_REF</a></li>

      <li class="api_group"><a class="group_link" href="../reference/TypeTraits.h.html">TypeTraits.h</a></li>

    </ul>
  </div>
</div>

<script>
    $(function() {
        $("#api_search").fastLiveFilter(
          "#api_list",
          {
            groups: ["api_group", "api_subgroup"]
          });
    });
</script>

<div id="content_panel_container">
  <div id="content_panel_header">
    <span class="header_text">


      <a href="../index.html">Home</a> &#8640;

      <a href="index.html">Tutorials</a> &#8640;


      Event streams
    </span>
  </div>
  <div class="content_panel_body">


  <h1>Event streams <span class="type_tag"></span></h1>

    
    <ul>
  <li><a href="BasicEvents.html#hello-world">Hello world</a></li>
  <li><a href="BasicEvents.html#merging-event-streams">Merging event streams</a></li>
  <li><a href="BasicEvents.html#filtering-events">Processing events</a></li>
  <li><a href="BasicEvents.html#changing-multiple-inputs">Changing multiple inputs</a></li>
</ul>

<h2 id="hello-world">Hello World</h2>

<p>The previously shown signals hold state and push changes to their dependents.
Event streams, on the other hand, are used to model more generic event types that are not coupled to state, for example mouse clicks.</p>

<p>We start the tutorial by creating an <code>EventSource</code> that can emit strings:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cp">#include &quot;react/Domain.h&quot;</span>
<span class="cp">#include &quot;react/Event.h&quot;</span>

<span class="n">REACTIVE_DOMAIN</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="n">sequential</span><span class="p">)</span>
<span class="n">USING_REACTIVE_DOMAIN</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>

<span class="n">EventSourceT</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">mySource</span> <span class="o">=</span> <span class="n">MakeEventSource</span><span class="o">&lt;</span><span class="n">D</span><span class="p">,</span><span class="n">string</span><span class="o">&gt;</span><span class="p">();</span></code></pre></div>

<p><code>EventSource</code> and  <code>Events</code> are the respective counterparts of <code>VarSignal</code> and <code>Signal</code>.</p>

<p>Analogously to <code>VarSignalT&lt;S&gt;</code>, <code>EventSourceT&lt;E&gt;</code> is an alias for <code>EventSource&lt;D,E&gt;</code> defined by <code>USING_REACTIVE_DOMAIN</code>.</p>

<p>Unlike signals, event streams are purely push-based.
They forward values to be processed, but don’t hold on to them.
There is no equivalent to the <code>Value()</code> accessor of <code>Signal</code>.</p>

<p>This means to do anything useful with <code>mySource</code>, we have to add an observer:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">Observe</span><span class="p">(</span><span class="n">mySource</span><span class="p">,</span> <span class="p">[]</span> <span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">s</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">});</span></code></pre></div>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">mySource</span><span class="p">.</span><span class="n">Emit</span><span class="p">(</span><span class="n">string</span><span class="p">(</span> <span class="s">&quot;Hello world&quot;</span> <span class="p">));</span>

<span class="c1">// ... or with operator</span>
<span class="n">mySource</span> <span class="o">&lt;&lt;</span> <span class="n">string</span><span class="p">(</span> <span class="s">&quot;Hello world&quot;</span> <span class="p">);</span></code></pre></div>

<p>Note that here we use the conventional stream operator <code>&lt;&lt;</code>, rather than <code>&lt;&lt;=</code>, which is used for signals.
The reasoning behind this is that event input is propagation-only, whereas signal input is both assignment and propagation.
In other words: Signals hold a value, event streams don’t. The different operators are meant to symbolize that.</p>

<p>There’s a third syntactic alternative that treats <code>mySource</code> as a function object:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">mySource</span><span class="p">(</span><span class="n">string</span><span class="p">(</span> <span class="s">&quot;Hello world&quot;</span> <span class="p">));</span></code></pre></div>

<p>These syntactic alternatives allow to distingish between several use cases.
For instance, if an event is used like a function triggering an action, function-style is appropriate.
If it acts more like a data stream, we can use the stream syntax.</p>

<p>It’s not uncommon that the value type transported by an event stream is irrelevant and we are only interested in the fact that it occurred.
For instance, when a button has been clicked. In this case, the value type can be omitted.
We create a second version of the “Hello world” program to demonstrate this:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">EventSourceT</span><span class="o">&lt;&gt;</span> <span class="n">helloWorldTrigger</span> <span class="o">=</span> <span class="n">MakeEventSource</span><span class="o">&lt;</span><span class="n">D</span><span class="o">&gt;</span><span class="p">();</span></code></pre></div>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">Observe</span><span class="p">(</span><span class="n">helloWorldTrigger</span><span class="p">,</span> <span class="p">[]</span> <span class="p">(</span><span class="n">Token</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Hello world&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">});</span></code></pre></div>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">helloWorldTrigger</span><span class="p">.</span><span class="n">Emit</span><span class="p">();</span>

<span class="c1">// Stream-style:</span>
<span class="n">helloWorldTrigger</span> <span class="o">&lt;&lt;</span> <span class="n">Token</span><span class="o">::</span><span class="n">value</span><span class="p">;</span>

<span class="c1">// Function-style:</span>
<span class="n">helloWorldTrigger</span><span class="p">();</span></code></pre></div>

<p>Internally, the value transported by token streams is of type <code>Token</code>, hence for the observer function, we added an unnamed argument of this type.</p>

<h2 id="merging-event-streams">Merging event streams</h2>

<p>From what we’ve seen so far, event streams are little more than callback registries;
but their true strength is composability.</p>

<p>For example, lets say we have two event sources that represent different mouse buttons.
We can easily merge them to a single stream that contains events from both buttons:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">EventSourceT</span><span class="o">&lt;&gt;</span> <span class="n">leftClick</span>  <span class="o">=</span> <span class="n">MakeEventSource</span><span class="o">&lt;</span><span class="n">D</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">EventSourceT</span><span class="o">&lt;&gt;</span> <span class="n">rightClick</span> <span class="o">=</span> <span class="n">MakeEventSource</span><span class="o">&lt;</span><span class="n">D</span><span class="o">&gt;</span><span class="p">();</span>

<span class="n">EventsT</span><span class="o">&lt;&gt;</span>      <span class="n">anyClick</span>   <span class="o">=</span> <span class="n">Merge</span><span class="p">(</span><span class="n">leftClick</span><span class="p">,</span> <span class="n">rightClick</span><span class="p">);</span></code></pre></div>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">Observe</span><span class="p">(</span><span class="n">anyClick</span><span class="p">,</span> <span class="p">[]</span> <span class="p">(</span><span class="n">Token</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;button clicked&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">});</span></code></pre></div>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">leftClick</span><span class="p">.</span><span class="n">Emit</span><span class="p">();</span>  <span class="c1">// output: clicked</span>
<span class="n">rightClick</span><span class="p">.</span><span class="n">Emit</span><span class="p">();</span> <span class="c1">// output: clicked</span></code></pre></div>

<p><code>Merge</code> takes a variable number of arguments, so more than two streams can be merged at once.</p>

<p>An alternative is using the overloaded <code>|</code> operator for merging:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">EventsT</span><span class="o">&lt;&gt;</span> <span class="n">anyClick</span> <span class="o">=</span> <span class="n">leftClick</span> <span class="o">|</span> <span class="n">rightClick</span><span class="p">;</span></code></pre></div>

<h2 id="processing-events">Processing events</h2>

<p>Besides merging events from multipe streams, we can also process the events themselves.</p>

<p>First, let’s demonstrate this by filtering a stream of numbers:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">EventSourceT</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">numbers</span> <span class="o">=</span> <span class="n">MakeEventSource</span><span class="o">&lt;</span><span class="n">D</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">();</span>

<span class="n">EventsT</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">greater10</span> <span class="o">=</span> <span class="n">Filter</span><span class="p">(</span><span class="n">numbers</span><span class="p">,</span> <span class="p">[]</span> <span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">;</span>
<span class="p">});</span></code></pre></div>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">Observe</span><span class="p">(</span><span class="n">greater10</span><span class="p">,</span> <span class="p">[]</span> <span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">n</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">});</span></code></pre></div>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">numbers</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span> <span class="o">&lt;&lt;</span> <span class="mi">11</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span> <span class="o">&lt;&lt;</span> <span class="mi">100</span><span class="p">;</span> <span class="c1">// output: 11, 100</span></code></pre></div>

<p>If the filter predicate function returns true for the passed value, it will be forwarded. Otherwise, it’s filtered out.</p>

<p>Events can also be transformed with <code>Transform</code>. In other functional programming languages this operation would be called map, but we stick to the naming of <code>std::transform</code>.
For example, we can transform a stream of numbers into a <code>std::pair</code> of the number and a tag that indicates whether the former exceeded a certain threshold:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">enum</span> <span class="n">Tag</span> <span class="p">{</span> <span class="n">normal</span><span class="p">,</span> <span class="n">critical</span> <span class="p">};</span>

<span class="k">using</span> <span class="n">TaggedNum</span> <span class="o">=</span> <span class="n">pair</span><span class="o">&lt;</span><span class="n">Tag</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">;</span>

<span class="n">EventSourceT</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span>  <span class="n">numbers</span> <span class="o">=</span> <span class="n">MakeEventSource</span><span class="o">&lt;</span><span class="n">D</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">EventsT</span><span class="o">&lt;</span><span class="n">TaggedNum</span><span class="o">&gt;</span> <span class="n">tagged</span>  <span class="o">=</span> <span class="n">Transform</span><span class="p">(</span><span class="n">numbers</span><span class="p">,</span> <span class="p">[]</span> <span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">TaggedNum</span><span class="p">(</span> <span class="n">critical</span><span class="p">,</span> <span class="n">n</span> <span class="p">);</span>
    <span class="k">else</span>
        <span class="k">return</span> <span class="nf">TaggedNum</span><span class="p">(</span> <span class="n">normal</span><span class="p">,</span> <span class="n">n</span> <span class="p">);</span>
<span class="p">});</span></code></pre></div>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">Observe</span><span class="p">(</span><span class="n">tagged</span><span class="p">,</span> <span class="p">[]</span> <span class="p">(</span><span class="k">const</span> <span class="n">TaggedNum</span><span class="o">&amp;</span> <span class="n">t</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">first</span> <span class="o">==</span> <span class="n">critical</span><span class="p">)</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;(critical) &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">t</span><span class="p">.</span><span class="n">second</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="k">else</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;(normal)  &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">t</span><span class="p">.</span><span class="n">second</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">});</span></code></pre></div>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">numbers</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// output: (normal) 5</span>

<span class="n">numbers</span> <span class="o">&lt;&lt;</span> <span class="mi">20</span><span class="p">;</span> 
<span class="c1">// output: (critical) 20</span></code></pre></div>

<h2 id="changing-multiple-inputs">Changing multiple inputs</h2>

<p>Queing multiple inputs in a single turn works analogously to signals:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">DoTransaction</span><span class="o">&lt;</span><span class="n">D</span><span class="o">&gt;</span><span class="p">([]</span> <span class="p">{</span>
    <span class="n">src</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">;</span>
    <span class="n">src</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">});</span></code></pre></div>

<p>It’s possible to mix signal and event input in the same transaction.</p>

<p>Unlike signals, where only the last value change for each signal is used, event streams will forward all queued values:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">EventSourceT</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">src</span> <span class="o">=</span> <span class="n">MakeEventSource</span><span class="o">&lt;</span><span class="n">D</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">();</span>

<span class="n">Observe</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="p">[]</span> <span class="p">(</span><span class="kt">int</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">v</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">});</span>
<span class="c1">// Turn #1, output: 1, 2, 3, 4</span></code></pre></div>

  </div>
</div>

</body>

</html>