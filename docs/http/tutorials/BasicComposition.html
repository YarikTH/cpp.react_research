<!DOCTYPE html>
<html>

<head>
  <title>Class composition | C++React</title>
  <link rel="icon" type="image/png" href="../media/favicon.png">
  <link rel="stylesheet" href="../styles/design.css">
  <link rel="stylesheet" href="../styles/syntax.css">
  <script src="../scripts/jquery-1.11.1.min.js"></script>
  <script src="../scripts/jquery.fastLiveFilter.js"></script>
</head>

<body>
<div id="nav_panel_container">
  <div id="nav_panel_header">
    <input id="api_search" class="search_input" placeholder="Type to filter">
  </div>
  <div id="nav_panel_body">
    <ul id="api_list">
      <li class="api_group"><a class="group_link" href="../reference/Algorithm.h.html">Algorithm.h</a></li>
      <!-- <li class="api_subgroup">Functions</li> -->
      <li><a class="ref_link" href="../reference/Algorithm.h/Hold.html"><img class="entity_icon" src="../media/icon_func.png" /> Hold</a></li>
      <li><a class="ref_link" href="../reference/Algorithm.h/Monitor.html"><img class="entity_icon" src="../media/icon_func.png" /> Monitor</a></li>
      <li><a class="ref_link" href="../reference/Algorithm.h/Iterate.html"><img class="entity_icon" src="../media/icon_func.png" /> Iterate</a></li>
      <li><a class="ref_link" href="../reference/Algorithm.h/Snapshot.html"><img class="entity_icon" src="../media/icon_func.png" /> Snapshot</a></li>
      <li><a class="ref_link" href="../reference/Algorithm.h/Pulse.html"><img class="entity_icon" src="../media/icon_func.png" /> Pulse</a></li>
      <li><a class="ref_link" href="../reference/Algorithm.h/Changed.html"><img class="entity_icon" src="../media/icon_func.png" /> Changed</a></li>
      <li><a class="ref_link" href="../reference/Algorithm.h/ChangedTo.html"><img class="entity_icon" src="../media/icon_func.png" /> ChangedTo</a></li>

      <li class="api_group"><a class="group_link" href="../reference/Domain.h.html">Domain.h</a></li>
      <!-- <li class="api_subgroup">Constants</li> -->
      <li><a class="ref_link" href="../reference/Domain.h/WeightHint.html"><img class="entity_icon" src="../media/icon_enum.png" /> WeightHint</a></li>
      <!-- <li class="api_subgroup">Classes</li> -->
      <li><a class="ref_link" href="../reference/Domain.h/Continuation.html"><img class="entity_icon" src="../media/icon_class.png" /> Continuation</a></li>
      <li><a class="ref_link" href="../reference/Domain.h/TransactionStatus.html"><img class="entity_icon" src="../media/icon_class.png" /> TransactionStatus</a></li>
      <!-- <li class="api_subgroup">Functions</li> -->
      <li><a class="ref_link" href="../reference/Domain.h/DoTransaction.html"><img class="entity_icon" src="../media/icon_func.png" /> DoTransaction</a></li>
      <li><a class="ref_link" href="../reference/Domain.h/AsyncTransaction.html"><img class="entity_icon" src="../media/icon_func.png" /> AsyncTransaction</a></li>
      <li><a class="ref_link" href="../reference/Domain.h/MakeContinuation.html"><img class="entity_icon" src="../media/icon_func.png" /> MakeContinuation</a></li>
      <!-- <li class="api_subgroup">Macros</li> -->
      <li><a class="ref_link" href="../reference/Domain.h/REACTIVE_DOMAIN.html"><img class="entity_icon" src="../media/icon_macro.png" /> REACTIVE_DOMAIN</a></li>
      <li><a class="ref_link" href="../reference/Domain.h/USING_REACTIVE_DOMAIN.html"><img class="entity_icon" src="../media/icon_macro.png" /> USING_REACTIVE_DOMAIN</a></li>

      <li class="api_group"><a class="group_link" href="../reference/Event.h.html">Event.h</a></li>
      <!-- <li class="api_subgroup">Constants</li> -->
      <li><a class="ref_link" href="../reference/Event.h/Token.html"><img class="entity_icon" src="../media/icon_enum.png" /> Token</a></li>
      <!-- <li class="api_subgroup">Classes</li> -->
      <li><a class="ref_link" href="../reference/Event.h/Events.html"><img class="entity_icon" src="../media/icon_class.png" /> Events</a></li>
      <li><a class="ref_link" href="../reference/Event.h/EventSource.html"><img class="entity_icon" src="../media/icon_class.png" /> EventSource</a></li>
      <li><a class="ref_link" href="../reference/Event.h/TempEvents.html"><img class="entity_icon" src="../media/icon_class.png" /> TempEvents</a></li>
      <li><a class="ref_link" href="../reference/Event.h/EventRange.html"><img class="entity_icon" src="../media/icon_class.png" /> EventRange</a></li>
      <!-- <li class="api_subgroup">Functions</li> -->
      <li><a class="ref_link" href="../reference/Event.h/MakeEventSource.html"><img class="entity_icon" src="../media/icon_func.png" /> MakeEventSource</a></li>
      <li><a class="ref_link" href="../reference/Event.h/Merge.html"><img class="entity_icon" src="../media/icon_func.png" /> Merge</a></li>
      <li><a class="ref_link" href="../reference/Event.h/Filter.html"><img class="entity_icon" src="../media/icon_func.png" /> Filter</a></li>
      <li><a class="ref_link" href="../reference/Event.h/Transform.html"><img class="entity_icon" src="../media/icon_func.png" /> Transform</a></li>
      <li><a class="ref_link" href="../reference/Event.h/Process.html"><img class="entity_icon" src="../media/icon_func.png" /> Process</a></li>
      <li><a class="ref_link" href="../reference/Event.h/Join.html"><img class="entity_icon" src="../media/icon_func.png" /> Join</a></li>
      <li><a class="ref_link" href="../reference/Event.h/Flatten.html"><img class="entity_icon" src="../media/icon_func.png" /> Flatten</a></li>
      <li><a class="ref_link" href="../reference/Event.h/Tokenize.html"><img class="entity_icon" src="../media/icon_func.png" /> Tokenize</a></li>

      <li class="api_group"><a class="group_link" href="../reference/Observer.h.html">Observer.h</a></li>
      <!-- <li class="api_subgroup">Constants</li> -->
      <li><a class="ref_link" href="../reference/Observer.h/ObserverAction.html"><img class="entity_icon" src="../media/icon_enum.png" /> ObserverAction</a></li>
      <!-- <li class="api_subgroup">Classes</li> -->
      <li><a class="ref_link" href="../reference/Observer.h/Observer.html"><img class="entity_icon" src="../media/icon_class.png" /> Observer</a></li>
      <li><a class="ref_link" href="../reference/Observer.h/ScopedObserver.html"><img class="entity_icon" src="../media/icon_class.png" /> ScopedObserver</a></li>
      <!-- <li class="api_subgroup">Functions</li> -->
      <li><a class="ref_link" href="../reference/Observer.h/Observe.html"><img class="entity_icon" src="../media/icon_func.png" /> Observe</a></li>

      <li class="api_group"><a class="group_link" href="../reference/Reactor.h.html">Reactor.h</a></li>
      <!-- <li class="api_subgroup">Classes</li> -->
      <li><a class="ref_link" href="../reference/Reactor.h/Reactor.html"><img class="entity_icon" src="../media/icon_class.png" /> Reactor</a></li>
      <!-- <li class="api_subgroup">Functions</li> -->
      <li><a class="ref_link" href="../reference/Reactor.h/MakeReactor.html"><img class="entity_icon" src="../media/icon_func.png" /> MakeReactor</a></li>

      <li class="api_group"><a class="group_link" href="../reference/Signal.h.html">Signal.h</a></li>
      <!-- <li class="api_subgroup">Classes</li> -->
      <li><a class="ref_link" href="../reference/Signal.h/Signal.html"><img class="entity_icon" src="../media/icon_class.png" /> Signal</a></li>
      <li><a class="ref_link" href="../reference/Signal.h/VarSignal.html"><img class="entity_icon" src="../media/icon_class.png" /> VarSignal</a></li>
      <li><a class="ref_link" href="../reference/Signal.h/TempSignal.html"><img class="entity_icon" src="../media/icon_class.png" /> TempSignal</a></li>
      <li><a class="ref_link" href="../reference/Signal.h/SignalPack.html"><img class="entity_icon" src="../media/icon_class.png" /> SignalPack</a></li>
      <!-- <li class="api_subgroup">Functions</li> -->
      <li><a class="ref_link" href="../reference/Signal.h/MakeVar.html"><img class="entity_icon" src="../media/icon_func.png" /> MakeVar</a></li>
      <li><a class="ref_link" href="../reference/Signal.h/MakeSignal.html"><img class="entity_icon" src="../media/icon_func.png" /> MakeSignal</a></li>
      <li><a class="ref_link" href="../reference/Signal.h/Flatten.html"><img class="entity_icon" src="../media/icon_func.png" /> Flatten</a></li>
      <li><a class="ref_link" href="../reference/Signal.h/With.html"><img class="entity_icon" src="../media/icon_func.png" /> With</a></li>
      <!-- <li class="api_subgroup">Macros</li> -->
      <li><a class="ref_link" href="../reference/Signal.h/REACTIVE_PTR.html"><img class="entity_icon" src="../media/icon_macro.png" /> REACTIVE_PTR</a></li>
      <li><a class="ref_link" href="../reference/Signal.h/REACTIVE_REF.html"><img class="entity_icon" src="../media/icon_macro.png" /> REACTIVE_REF</a></li>

      <li class="api_group"><a class="group_link" href="../reference/TypeTraits.h.html">TypeTraits.h</a></li>

    </ul>
  </div>
</div>

<script>
    $(function() {
        $("#api_search").fastLiveFilter(
          "#api_list",
          {
            groups: ["api_group", "api_subgroup"]
          });
    });
</script>

<div id="content_panel_container">
  <div id="content_panel_header">
    <span class="header_text">


      <a href="../index.html">Home</a> &#8640;

      <a href="index.html">Tutorials</a> &#8640;


      Class composition
    </span>
  </div>
  <div class="content_panel_body">


  <h1>Class composition <span class="type_tag"></span></h1>

    
    <ul>
  <li><a href="BasicComposition.html#Reactive-class-members">Reactive class members</a></li>
  <li><a href="BasicComposition.html#signalsevents-of-references">Signals/events of references</a></li>
  <li><a href="BasicComposition.html#dynamic-signalevent-references">Dynamic signal/event references</a></li>
</ul>

<h2 id="reactive-class-members">Reactive class members</h2>

<p>Most examples in previous tutorials defined reactives in a global context.
In practice, however, the predominant use case should be defining them as class members (hopefully).
There is nothing fundamentally different about that.</p>

<p>Here’s an example:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cp">#include &quot;react/Domain.h&quot;</span>
<span class="cp">#include &quot;react/Signal.h&quot;</span>
<span class="cp">#include &quot;react/Event.h&quot;</span>

<span class="n">REACTIVE_DOMAIN</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="n">sequential</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Shape</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">USING_REACTIVE_DOMAIN</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>

    <span class="n">VarSignalT</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span>  <span class="n">Width</span>    <span class="o">=</span> <span class="n">MakeVar</span><span class="o">&lt;</span><span class="n">D</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">VarSignalT</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span>  <span class="n">Height</span>   <span class="o">=</span> <span class="n">MakeVar</span><span class="o">&lt;</span><span class="n">D</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

    <span class="n">SignalT</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span>     <span class="n">Size</span>     <span class="o">=</span> <span class="n">width</span> <span class="o">*</span> <span class="n">height</span><span class="p">;</span>

    <span class="n">EventSourceT</span><span class="o">&lt;&gt;</span>   <span class="n">HasMoved</span> <span class="o">=</span> <span class="n">MakeEventSource</span><span class="o">&lt;</span><span class="n">D</span><span class="o">&gt;</span><span class="p">();</span>
<span class="p">};</span></code></pre></div>

<p>We used C++11 in-class member initialization.
Alternatively, the members could’ve been initialized the constructor.
For both variants, it’s important to mind the declaration/initialization order:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">class</span> <span class="nc">Shape</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">USING_REACTIVE_DOMAIN</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>

    <span class="n">SignalT</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span>    <span class="n">Size</span><span class="p">;</span>
    <span class="n">VarSignalT</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">Width</span><span class="p">;</span>
    <span class="n">VarSignalT</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">Height</span><span class="p">;</span>
    <span class="n">EventSourceT</span><span class="o">&lt;&gt;</span>  <span class="n">HasMoved</span><span class="p">;</span>

    <span class="n">Shape</span><span class="p">()</span> <span class="o">:</span>
        <span class="c1">// Breaks, because Width and Height are still uninitialized at this point</span>
        <span class="n">Size</span><span class="p">(</span> <span class="n">Width</span> <span class="o">*</span> <span class="n">Height</span> <span class="p">),</span> 
        <span class="n">Width</span><span class="p">(</span> <span class="n">MakeVar</span><span class="o">&lt;</span><span class="n">D</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">),</span>
        <span class="n">Height</span><span class="p">(</span> <span class="n">MakeVar</span><span class="o">&lt;</span><span class="n">D</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">),</span>
        <span class="n">HasMoved</span><span class="p">(</span> <span class="n">MakeEventSource</span><span class="o">&lt;</span><span class="n">D</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">)</span>
    <span class="p">{}</span>
<span class="p">};</span></code></pre></div>

<p>If a reactive value is used before it has been initialized, that would be equivalent to a <code>nullptr</code>.</p>

<h2 id="signalsevents-of-references">Signals/events of references</h2>

<p>When creating signals (or event streams) of class types, chances are we want references or pointers as value types.</p>

<p>Signals of pointers require no special treatment, since pointers have value semantics anyway.
For references, we could use <code>std::reference_wrapper</code>. Alternatively, <code>Signal</code> is specialized for reference types, which is slightly more convenient:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">class</span> <span class="nc">Company</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">Name</span><span class="p">;</span>

    <span class="n">Company</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">name</span><span class="p">)</span> <span class="o">:</span>
        <span class="n">Name</span><span class="p">(</span> <span class="n">name</span> <span class="p">)</span>
    <span class="p">{}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Employee</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">USING_REACTIVE_DOMAIN</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>

    <span class="n">VarSignalT</span><span class="o">&lt;</span><span class="n">Company</span><span class="o">&amp;&gt;</span> <span class="n">MyCompany</span><span class="p">;</span>

    <span class="n">Employee</span><span class="p">(</span><span class="n">Company</span><span class="o">&amp;</span> <span class="n">company</span><span class="p">)</span> <span class="o">:</span>
        <span class="n">MyCompany</span><span class="p">(</span> <span class="n">MakeVar</span><span class="o">&lt;</span><span class="n">D</span><span class="o">&gt;</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">ref</span><span class="p">(</span><span class="n">company</span><span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
    <span class="p">{}</span>
<span class="p">};</span></code></pre></div>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">Company</span>     <span class="nf">company1</span><span class="p">(</span> <span class="s">&quot;MetroTec&quot;</span> <span class="p">);</span>
<span class="n">Company</span>     <span class="nf">company2</span><span class="p">(</span> <span class="s">&quot;ACME&quot;</span> <span class="p">);</span>

<span class="n">Employee</span>    <span class="nf">bob</span><span class="p">(</span> <span class="n">company1</span> <span class="p">);</span>

<span class="n">Observe</span><span class="p">(</span><span class="n">bob</span><span class="p">.</span><span class="n">MyCompany</span><span class="p">,</span> <span class="p">[]</span> <span class="p">(</span><span class="k">const</span> <span class="n">Company</span><span class="o">&amp;</span> <span class="n">company</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Bob works for &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">company</span><span class="p">.</span><span class="n">Name</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">});</span>

<span class="n">bob</span><span class="p">.</span><span class="n">Company</span> <span class="o">&lt;&lt;=</span> <span class="n">std</span><span class="o">::</span><span class="n">ref</span><span class="p">(</span><span class="n">company2</span><span class="p">);</span> <span class="c1">// output: Bob now works for ACME</span></code></pre></div>

<p>As shown, input to a signal of a reference has to be wrapped by <code>std::ref</code> or <code>std::cref</code> to make the reference obvious.
Event streams of references are used in the same fashion.</p>

<h2 id="dynamic-signalevent-references">Dynamic signal/event references</h2>

<p>Now let’s consider that the company name is a signal as well:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cp">#include &lt;string&gt;</span>
<span class="k">using</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Company</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">USING_REACTIVE_DOMAIN</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>

    <span class="n">VarSignalT</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">Name</span><span class="p">;</span>

    <span class="n">Company</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">name</span><span class="p">)</span> <span class="o">:</span>
        <span class="n">Name</span><span class="p">(</span> <span class="n">MakeVar</span><span class="o">&lt;</span><span class="n">D</span><span class="o">&gt;</span><span class="p">(</span><span class="n">string</span><span class="p">(</span> <span class="n">name</span> <span class="p">)</span> <span class="p">)</span>
    <span class="p">{}</span>
<span class="p">};</span></code></pre></div>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">Company</span>     <span class="n">company1</span><span class="p">{</span> <span class="s">&quot;MetroTec&quot;</span> <span class="p">};</span>
<span class="n">Company</span>     <span class="n">company2</span><span class="p">{</span> <span class="s">&quot;ACME&quot;</span> <span class="p">};</span>

<span class="n">Employee</span>    <span class="n">alice</span><span class="p">{</span> <span class="n">company1</span> <span class="p">};</span></code></pre></div>

<p>We want to create an observer of the name of Alice’s current company. This might work:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">Observe</span><span class="p">(</span>
    <span class="n">alice</span><span class="p">.</span><span class="n">MyCompany</span><span class="p">.</span><span class="n">Value</span><span class="p">().</span><span class="n">Name</span><span class="p">,</span>
    <span class="p">[]</span> <span class="p">(</span><span class="n">string</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Alice works for &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">});</span></code></pre></div>

<p>But the following input reveals a problem:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">company1</span><span class="p">.</span><span class="n">Name</span> <span class="o">&lt;&lt;=</span> <span class="n">string</span><span class="p">(</span><span class="s">&quot;ModernTec&quot;</span><span class="p">);</span>
<span class="c1">// output: Alice now works for ModernTec</span>
<span class="c1">// OK so far</span>

<span class="n">alice</span><span class="p">.</span><span class="n">Company</span> <span class="o">&lt;&lt;=</span> <span class="n">std</span><span class="o">::</span><span class="n">ref</span><span class="p">(</span><span class="n">company2</span><span class="p">);</span> 
<span class="c1">// no output</span>
<span class="c1">// Name should&#39;ve changed</span></code></pre></div>

<p>The observer was registered to the name of the company Alice worked for at the time, as indicated by <code>MyCompany.Value()</code>.
When the company changes from <code>company1</code> to <code>company2</code>, it has to shift from <code>company1.Name</code> to <code>company2.Name</code>.
We cannot do this with any of the mechanisms presented so far.</p>

<p>This is enabled by the <code>REACTIVE_REF</code> macro:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">SignalT</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">myCompanyName</span> <span class="o">=</span> <span class="n">REACTIVE_REF</span><span class="p">(</span><span class="n">alice</span><span class="p">.</span><span class="n">MyCompany</span><span class="p">,</span> <span class="n">Name</span><span class="p">);</span>

<span class="n">Observe</span><span class="p">(</span><span class="n">myCompanyName</span><span class="p">,</span> <span class="p">[]</span> <span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Alice works for &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">});</span></code></pre></div>

<p>The intermediate signal can be avoided, as long as we keep the observer handle alive:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">ObserverT</span> <span class="n">obs</span> <span class="o">=</span> <span class="n">Observe</span><span class="p">(</span>
    <span class="n">REACTIVE_REF</span><span class="p">(</span><span class="n">alice</span><span class="p">.</span><span class="n">MyCompany</span><span class="p">,</span> <span class="n">Name</span><span class="p">),</span>
    <span class="p">[]</span> <span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Alice works for &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">});</span></code></pre></div>

<p>In both cases, the output is:</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">company1</span><span class="p">.</span><span class="n">Name</span> <span class="o">&lt;&lt;=</span> <span class="n">string</span><span class="p">(</span><span class="s">&quot;ModernTec&quot;</span><span class="p">);</span>
<span class="c1">// output: Alice now works for ModernTec</span>

<span class="n">alice</span><span class="p">.</span><span class="n">Company</span> <span class="o">&lt;&lt;=</span> <span class="n">std</span><span class="o">::</span><span class="n">ref</span><span class="p">(</span><span class="n">company2</span><span class="p">);</span> 
<span class="c1">// output: Alice now works for ACME</span>

<span class="n">company2</span><span class="p">.</span><span class="n">Name</span> <span class="o">&lt;&lt;=</span> <span class="n">string</span><span class="p">(</span><span class="s">&quot;A.C.M.E.&quot;</span><span class="p">);</span> 
<span class="c1">// output: Alice now works for A.C.M.E.</span></code></pre></div>

<p>A similar macro <code>REACTIVE_PTR</code> exists for pointer types (i.e. <code>VarSignalT&lt;Company*&gt;</code>).</p>

  </div>
</div>

</body>

</html>